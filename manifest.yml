---
applications:

  # --- Worldmind Orchestrator (Spring Boot JAR) ---
  - name: worldmind
    memory: 1536M
    disk_quota: 2G
    instances: 1
    path: target/worldmind-0.1.0-SNAPSHOT.jar
    buildpacks:
      - java_buildpack_offline
    env:
      JBP_CONFIG_OPEN_JDK_JRE: '{ jre: { version: 21.+ }, memory_calculator: { stack_threads: 100 } }'
      JAVA_OPTS: '-XX:MaxMetaspaceSize=128m -XX:ReservedCodeCacheSize=64m -XX:+UseG1GC -XX:MaxGCPauseMillis=200'
      SPRING_PROFILES_ACTIVE: cf
      CENTURION_IMAGE_REGISTRY: ((centurion-image-registry))
      CF_API_URL: ((cf-api-url))
      CF_ORG: ((cf-org))
      CF_SPACE: ((cf-space))
      CF_USERNAME: ((cf-username))
      CF_PASSWORD: ((cf-password))
      GIT_TOKEN: ((git-token))
      CENTURION_FORGE_APP: ((centurion-forge-app))
      CENTURION_GAUNTLET_APP: ((centurion-gauntlet-app))
      CENTURION_VIGIL_APP: ((centurion-vigil-app))
      CENTURION_PULSE_APP: ((centurion-pulse-app))
      CENTURION_PRISM_APP: ((centurion-prism-app))
    services:
      - worldmind-postgres
      - worldmind-model

  # --- Centurion: Forge (code generation) ---
  - name: ((centurion-forge-app))
    docker:
      image: ((centurion-image-registry))/centurion-forge:latest
      username: ((docker-username))
    memory: 2G
    disk_quota: 4G
    instances: 0
    health-check-type: process
    no-route: true
    services:
      - worldmind-model

  # --- Centurion: Gauntlet (testing) ---
  - name: ((centurion-gauntlet-app))
    docker:
      image: ((centurion-image-registry))/centurion-gauntlet:latest
      username: ((docker-username))
    memory: 2G
    disk_quota: 4G
    instances: 0
    health-check-type: process
    no-route: true
    services:
      - worldmind-model

  # --- Centurion: Vigil (code review) ---
  - name: ((centurion-vigil-app))
    docker:
      image: ((centurion-image-registry))/centurion-vigil:latest
      username: ((docker-username))
    memory: 2G
    disk_quota: 4G
    instances: 0
    health-check-type: process
    no-route: true
    services:
      - worldmind-model

  # --- Centurion: Pulse (research, read-only) ---
  - name: ((centurion-pulse-app))
    docker:
      image: ((centurion-image-registry))/centurion-pulse:latest
      username: ((docker-username))
    memory: 2G
    disk_quota: 4G
    instances: 0
    health-check-type: process
    no-route: true
    services:
      - worldmind-model

  # --- Centurion: Prism (refactoring) ---
  - name: ((centurion-prism-app))
    docker:
      image: ((centurion-image-registry))/centurion-prism:latest
      username: ((docker-username))
    memory: 2G
    disk_quota: 4G
    instances: 0
    health-check-type: process
    no-route: true
    services:
      - worldmind-model
